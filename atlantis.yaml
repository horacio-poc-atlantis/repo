version: 3
automerge: true
abort_on_execution_order_fail: true

projects:
- name: some-application-test
  dir: some-application-test
  workflow: staging
  execution_order_group: 1
  autoplan:
    enabled: true
    when_modified:
      - "../modules/**/*.tf"
      - "../common/*.tf"
      - "*.tf"

- name: some-application-prod
  dir: some-application-prod
  workflow: production
  execution_order_group: 2
  autoplan:
    enabled: true
    when_modified:
      - "../modules/**/*.tf"
      - "../common/*.tf"
      - "*.tf"
